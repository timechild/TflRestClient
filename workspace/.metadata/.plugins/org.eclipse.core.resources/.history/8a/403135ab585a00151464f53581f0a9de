package org.disruptiontables.rest;

import java.util.List;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.UriInfo;

import org.disruption.service.StationService;
import org.disruptiontables.dao.Station;

@Path("stations")
public class StationResource {
	
	/*
	@GET
	@Produces(MediaType.APPLICATION_JSON)
	public List<Station> getAllStations(){
		StationService ss = new StationService();
		//return ss.getAllStations();
		//return ss.getStationPaTakeKurce();
		return ss.getSortedStations(2, 5, 21);
	}
	*/
	
	@GET
	@Produces(MediaType.APPLICATION_JSON)
	public List<Station> getSortedStation(@Context UriInfo uriInfo){
			
			String line = uriInfo.getQueryParameters().getFirst("line");
			String from = uriInfo.getQueryParameters().getFirst("from");
			String to = uriInfo.getQueryParameters().getFirst("to");
			
			StationService ss = new StationService();
			
			if(from!=null||to!=null||line==null){
				return ss.getSortedStations(Integer.parseInt(from), Integer.parseInt(to), 21);
			}
			else
				return ss.getAllStations();
	}
	
}
